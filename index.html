<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>合肥实验学校20级2班官方网站</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Arial','Microsoft YaHei',sans-serif}body{line-height:1.6;color:#333}.container{max-width:1200px;margin:0 auto;padding:0 20px}.section{padding:60px 0}.navbar{background:#fff;box-shadow:0 2px 10px rgba(0,0,0,0.1);position:fixed;width:100%;top:0;z-index:1000}.nav-container{max-width:1200px;margin:0 auto;padding:15px 20px;display:flex;justify-content:space-between;align-items:center}.logo-container{display:flex;align-items:center;gap:15px}.logo{height:40px;width:auto;border-radius:50%}.class-name{font-size:1.5rem;font-weight:bold;color:#2c3e50}.nav-links{display:flex;gap:30px}.nav-links a{text-decoration:none;color:#555;font-weight:500;transition:color .3s}.nav-links a:hover{color:#3498db}.hero{background:linear-gradient(135deg,#3498db,#2c3e50);color:white;padding:150px 0 100px;text-align:center;margin-top:70px}.hero-content h1{font-size:2.8rem;margin-bottom:20px}.hero-content p{font-size:1.2rem;margin-bottom:30px;opacity:.9}.btn{display:inline-block;background:#e74c3c;color:white;padding:12px 30px;border-radius:30px;text-decoration:none;font-weight:bold;border:none;cursor:pointer;transition:background .3s}.btn:hover{background:#c0392b}.btn-small{padding:6px 12px;font-size:0.8rem}.btn-delete{background:#95a5a6}.btn-delete:hover{background:#7f8c8d}.about-content{display:grid;grid-template-columns:2fr 1fr;gap:50px;margin-top:40px}@media(max-width:768px){.about-content{grid-template-columns:1fr}}.stat{text-align:center;padding:30px;background:white;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.1)}.stat i{font-size:2.5rem;color:#3498db;margin-bottom:15px}.section-subtitle{text-align:center;color:#666;margin-bottom:40px}.visitor-form{max-width:500px;margin:0 auto 50px;background:white;padding:30px;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.1)}.visitor-form input{width:100%;padding:12px;margin-bottom:15px;border:2px solid #ddd;border-radius:5px;font-size:16px}.visitor-form input:focus{border-color:#3498db;outline:none}.form-note{font-size:0.9rem;color:#666;margin-top:10px;text-align:center}.visitors-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px;margin-top:30px}@media(max-width:768px){.visitors-list{grid-template-columns:1fr}}.visitor-card{background:white;padding:20px;border-radius:10px;box-shadow:0 3px 10px rgba(0,0,0,0.1);text-align:center;position:relative}.visitor-card h4{color:#2c3e50;margin-bottom:10px}.visitor-card p{color:#666;font-size:0.9rem}.visitor-card .time{font-size:0.8rem;color:#999;margin-top:10px}.no-visitors{text-align:center;padding:40px;color:#888;font-style:italic}.delete-btn{position:absolute;top:5px;right:5px;background:none;border:none;color:#e74c3c;cursor:pointer;font-size:0.8rem;opacity:0.7}.delete-btn:hover{opacity:1}footer{background:#2c3e50;color:white;padding:40px 0;text-align:center}.footer-content{display:flex;flex-direction:column;align-items:center;gap:20px}.footer-logo{display:flex;align-items:center;gap:15px}.footer-logo-img{height:30px;width:auto;border-radius:50%}.features{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:30px;margin-top:40px}.feature{text-align:center;padding:25px;background:white;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.05)}.feature i{font-size:2.5rem;color:#3498db;margin-bottom:15px}@media(max-width:768px){.nav-links{display:none}.hero-content h1{font-size:2rem}}.login-page{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#3498db,#2c3e50);display:flex;justify-content:center;align-items:center;z-index:2000;transition:opacity .5s}.login-container{background:white;padding:40px;border-radius:15px;box-shadow:0 15px 35px rgba(0,0,0,0.2);max-width:400px;width:90%;text-align:center}.login-form h2{margin-bottom:30px;color:#2c3e50}.login-form input{width:100%;padding:12px;margin-bottom:20px;border:2px solid #ddd;border-radius:5px;font-size:16px}.login-form input:focus{border-color:#3498db}.login-error{color:#e74c3c;margin-bottom:15px;font-size:0.9rem;min-height:20px}.login-info{font-size:0.8rem;color:#666;margin-top:20px;background:#f8f9fa;padding:10px;border-radius:5px}.account-list{display:grid;grid-template-columns:1fr;gap:10px;margin-top:15px}.account-item{padding:8px;background:#f1f8ff;border-radius:5px;font-size:0.8rem;cursor:pointer;transition:all .2s}.account-item:hover{background:#e3f2fd;transform:translateY(-2px)}.account-item .username{font-weight:bold}.account-item .password{color:#666;font-size:0.7rem}html{scroll-behavior:smooth}.visitor-card,.stat,.feature{transition:transform .2s,box-shadow .2s}.visitor-card:hover,.stat:hover,.feature:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(0,0,0,0.12)}#scrollTopBtn{position:fixed;bottom:30px;right:30px;width:50px;height:50px;border-radius:50%;background:#3498db;color:white;border:none;cursor:pointer;font-size:1.5rem;display:none;z-index:1000;box-shadow:0 3px 10px rgba(0,0,0,0.3);transition:opacity .3s}#scrollTopBtn:hover{opacity:.9}.fade-in{animation:fadeIn .5s ease-out}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    </style>
</head>
<body>
    <div id="loginPage" class="login-page">
        <div class="login-container">
            <div class="login-form">
                <h2><i class="fas fa-user-graduate"></i> 登录，访问美好世界</h2>
                <input type="text" id="loginUsername" placeholder="用户名" autocomplete="off">
                <input type="password" id="loginPassword" placeholder="密码" autocomplete="off">
                <div id="loginError" class="login-error"></div>
                <button onclick="checkLogin()" class="btn">登录</button>
                <div class="login-info">
                    <p><strong>上次登录（点击快速填写）：</strong></p>
                    <div id="accountList" class="account-list"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="mainContent" style="display:none;">
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo-container">
                    <img src="class-badge.png" alt="班徽" class="logo" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSI0NSIgZmlsbD0iIzM0OThkYiIvPjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5YiG5LqrPC90ZXh0Pjwvc3ZnPg=='">
                    <span class="class-name">我们的班级</span>
                    <span style="font-size:0.9rem;color:#666;margin-left:10px;">当前登陆账号: <span id="loggedInUser">班级成员</span></span>
                </div>
                <div class="nav-links">
                    <a href="#home">首页</a>
                    <a href="#about">关于我们</a>
                    <a href="#features">班级特色</a>
                    <a href="#contact">留言板</a>
                    <a href="#" onclick="logout()" style="color:#e74c3c"><i class="fas fa-sign-out-alt"></i> 退出</a>
                </div>
            </div>
        </nav>

        <section id="home" class="hero fade-in">
            <div class="hero-content">
                <h1>欢迎来到我们的班级</h1>
                <p>团结、奋进、求知、成长</p>
                <a href="#about" class="btn">了解更多</a>
            </div>
        </section>

        <section id="about" class="section">
            <div class="container">
                <h2>关于我们</h2>
                <div class="about-content">
                    <div class="about-text">
                        <h3>班级简介</h3>
                        <p>我们是一个充满活力、积极向上的集体。在这里，我们一起学习，一起成长，共同创造美好的回忆。</p>
                    </div>
                    <div class="about-stats">
                        <div class="stat fade-in" style="animation-delay:0.1s">
                            <i class="fas fa-users"></i>
                            <h3>班级人数</h3>
                            <p>43人</p>
                        </div>
                        <div class="stat fade-in" style="animation-delay:0.2s">
                            <i class="fas fa-graduation-cap"></i>
                            <h3>我们第一次见面</h3>
                            <p>2020年9月</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="features" class="section bg-light">
            <div class="container">
                <h2>班级特色</h2>
                <div class="features">
                    <div class="feature fade-in" style="animation-delay:0.1s">
                        <i class="fas fa-heart"></i>
                        <h3>团结友爱</h3>
                        <p>我们像一个大家庭，互帮互助，共同进步。</p>
                    </div>
                    <div class="feature fade-in" style="animation-delay:0.2s">
                        <i class="fas fa-lightbulb"></i>
                        <h3>创新思维</h3>
                        <p>鼓励创新，培养解决问题的能力。</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="section">
            <div class="container">
                <h2>留言板</h2>
                <p class="section-subtitle">留下你的名字，让我们知道你来过！</p>
                
                <div class="visitor-form fade-in">
                    <input type="text" id="visitorName" placeholder="请输入你的名字" maxlength="20">
                    <input type="text" id="visitorMessage" placeholder="想说点什么？（可选）" maxlength="50">
                    <button onclick="addVisitor()" class="btn">留下我的名字</button>
                    <p class="form-note">注意：留言会上传至云端服务器，请谨慎填写！</p>
                    <div style="display:flex;gap:10px;justify-content:center;margin-top:15px">
                        <button onclick="clearAllVisitors()" class="btn btn-small btn-delete">清空留言</button>
                        <button onclick="copySiteLink()" class="btn btn-small">复制链接</button>
                    </div>
                </div>

                <div class="visitors-container">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
                        <h3>最近访客</h3>
                        <div style="color:#666;font-size:0.9rem">
                            共 <span id="totalMessages">0</span> 条留言
                        </div>
                    </div>
                    <div id="visitorsList" class="visitors-list"></div>
                </div>
            </div>
        </section>

        <footer>
            <div class="container">
                <div class="footer-content">
                    <div class="footer-logo">
                        <img src="class-badge.png" alt="班徽" class="footer-logo-img" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSI0NSIgZmlsbD0iIzM0OThkYiIvPjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5YiG5LqrPC90ZXh0Pjwvc3ZnPg=='">
                        <p>合肥实验学校20级2班官网</p>
                    </div>
                    <p>&copy; <span id="currentYear">2026</span> 202班的最牛程序猿. 保留所有权利.</p>
                </div>
            </div>
        </footer>

        <button id="scrollTopBtn" onclick="scrollToTop()">↑</button>
    </div>

    <script>
        // ================================================
        // 【预设账号配置】- 只有老师和管理员
        // ================================================
        const PRESET_ACCOUNTS = [
            // 管理员账号
            { username: "管理员孙亦阳", password: "syyadmin", displayName: "班级管理员" },
            
            // 老师账号
            { username: "老师账号", password: "teacherid", displayName: "老师账号" }
        ];
        // ================================================

        class LoginManager {
            constructor() {
                this.loginKey = 'class_login_status';
                this.userKey = 'class_logged_in_user';
                this.checkAutoLogin();
                this.initAccountList();
            }

            initAccountList() {
                const accountList = document.getElementById('accountList');
                accountList.innerHTML = PRESET_ACCOUNTS.map(account => `
                    <div class="account-item" onclick="fillAccount('${account.username}', '${account.password}')">
                        <div class="username">${account.username}</div>
                        <div class="password">密码: ${account.password}</div>
                    </div>
                `).join('');
            }

            fillAccount(username, password) {
                document.getElementById('loginUsername').value = username;
                document.getElementById('loginPassword').value = password;
                document.getElementById('loginError').textContent = '';
            }

            checkAutoLogin() {
                const isLoggedIn = localStorage.getItem(this.loginKey);
                const loggedInUser = localStorage.getItem(this.userKey);
                
                if (isLoggedIn === 'true' && loggedInUser) {
                    this.showMainContent(loggedInUser);
                }
            }

            login(username, password) {
                const account = PRESET_ACCOUNTS.find(acc => 
                    acc.username === username && acc.password === password
                );
                
                if (account) {
                    localStorage.setItem(this.loginKey, 'true');
                    localStorage.setItem(this.userKey, account.displayName);
                    this.showMainContent(account.displayName);
                    return true;
                }
                return false;
            }

            logout() {
                if (confirm('确定要退出登录吗？')) {
                    localStorage.removeItem(this.loginKey);
                    localStorage.removeItem(this.userKey);
                    this.showLoginPage();
                }
            }

            showMainContent(displayName) {
                document.getElementById('loginPage').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loginPage').style.display = 'none';
                    document.getElementById('mainContent').style.display = 'block';
                    document.getElementById('loggedInUser').textContent = displayName;
                    this.showToast(`欢迎回来，${displayName}！`, 'success');
                    
                    visitorManager.init();
                    initScrollButton();
                    document.getElementById('currentYear').textContent = new Date().getFullYear();
                }, 500);
            }

            showLoginPage() {
                document.getElementById('loginPage').style.display = 'flex';
                setTimeout(() => {
                    document.getElementById('loginPage').style.opacity = '1';
                    document.getElementById('mainContent').style.display = 'none';
                    document.getElementById('loginUsername').value = '';
                    document.getElementById('loginPassword').value = '';
                    document.getElementById('loginError').textContent = '';
                }, 100);
            }

            showToast(message, type = 'info') {
                const toast = document.createElement('div');
                const colors = { success: '#2ecc71', warning: '#f39c12', info: '#3498db', error: '#e74c3c' };
                toast.innerHTML = `
                    <div style="
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: ${colors[type] || '#3498db'};
                        color: white;
                        padding: 15px 25px;
                        border-radius: 5px;
                        animation: slideIn 0.3s ease-out;
                        z-index: 1001;
                        box-shadow: 0 3px 10px rgba(0,0,0,0.2);
                    ">
                        <i class="fas fa-${type === 'success' ? 'check' : 'info'}-circle"></i> ${message}
                    </div>
                `;
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.animation = 'slideOut 0.3s ease-out forwards';
                    setTimeout(() => toast.remove(), 300);
                }, 2000);
            }
        }

        class VisitorManager {
            constructor() {
                this.visitorsKey = 'class_visitors';
                this.maxVisitors = 20;
            }

            init() {
                this.displayVisitors();
                if (!this.getVisitors().length) {
                    this.addSampleVisitors();
                }
                this.updateStats();
            }

            addSampleVisitors() {
                const samples = [
                    { name: "某位同学说", message: "同学们加油！" },
                    { name: "某位同学说", message: "班级网站太棒了！" },
                    { name: "某位同学说", message: "为我们的班级自豪" }
                ];
                samples.forEach(v => this.addVisitor(v.name, v.message, true));
            }

            addVisitor(name, message = '', isSample = false) {
                if (!isSample && !name.trim()) {
                    loginManager.showToast('请输入你的名字', 'warning');
                    return;
                }

                const visitor = {
                    name: name.trim().substr(0, 20),
                    message: message.trim().substr(0, 50),
                    time: new Date().toLocaleString('zh-CN'),
                    id: Date.now() + Math.random().toString(36).substr(2, 9)
                };

                let visitors = this.getVisitors();
                visitors.unshift(visitor);
                
                if (visitors.length > this.maxVisitors) {
                    visitors = visitors.slice(0, this.maxVisitors);
                }

                localStorage.setItem(this.visitorsKey, JSON.stringify(visitors));
                this.displayVisitors();
                
                if (!isSample) {
                    document.getElementById('visitorName').value = '';
                    document.getElementById('visitorMessage').value = '';
                    loginManager.showToast('留言成功！', 'success');
                }
            }

            deleteVisitor(id) {
                if (!confirm('确定要删除这条留言吗？')) return;
                
                let visitors = this.getVisitors();
                visitors = visitors.filter(v => v.id !== id);
                localStorage.setItem(this.visitorsKey, JSON.stringify(visitors));
                this.displayVisitors();
                loginManager.showToast('已删除留言', 'info');
            }

            clearAllVisitors() {
                if (confirm('确定要清空所有留言吗？')) {
                    localStorage.removeItem(this.visitorsKey);
                    this.displayVisitors();
                    loginManager.showToast('已清空留言', 'info');
                }
            }

            getVisitors() {
                const visitors = localStorage.getItem(this.visitorsKey);
                return visitors ? JSON.parse(visitors) : [];
            }

            displayVisitors() {
                const visitors = this.getVisitors();
                const container = document.getElementById('visitorsList');
                
                if (!visitors.length) {
                    container.innerHTML = '<p class="no-visitors">还没有访客，快来成为第一个吧！</p>';
                    this.updateStats();
                    return;
                }

                container.innerHTML = visitors.map(v => `
                    <div class="visitor-card fade-in">
                        <button class="delete-btn" onclick="visitorManager.deleteVisitor('${v.id}')" title="删除">
                            <i class="fas fa-times"></i>
                        </button>
                        <h4>${this.escapeHtml(v.name)}</h4>
                        ${v.message ? `<p>${this.escapeHtml(v.message)}</p>` : ''}
                        <div class="time">${v.time}</div>
                    </div>
                `).join('');
                this.updateStats();
            }

            updateStats() {
                document.getElementById('totalMessages').textContent = this.getVisitors().length;
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        }

        const loginManager = new LoginManager();
        const visitorManager = new VisitorManager();

        function fillAccount(username, password) {
            loginManager.fillAccount(username, password);
        }

        function checkLogin() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;
            const errorElement = document.getElementById('loginError');
            
            if (!username || !password) {
                errorElement.textContent = '请输入用户名和密码';
                return;
            }
            
            if (loginManager.login(username, password)) {
                errorElement.textContent = '';
            } else {
                errorElement.textContent = '用户名或密码错误';
            }
        }

        function logout() {
            loginManager.logout();
        }

        function addVisitor() {
            const name = document.getElementById('visitorName').value;
            const message = document.getElementById('visitorMessage').value;
            visitorManager.addVisitor(name, message);
        }

        function clearAllVisitors() {
            visitorManager.clearAllVisitors();
        }

        function copySiteLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                loginManager.showToast('链接已复制到剪贴板', 'success');
            });
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function initScrollButton() {
            window.addEventListener('scroll', function() {
                const btn = document.getElementById('scrollTopBtn');
                btn.style.display = window.scrollY > 300 ? 'block' : 'none';
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);

            document.getElementById('loginUsername').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('loginPassword').focus();
                }
            });
            
            document.getElementById('loginPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') checkLogin();
            });
        });
    </script>
</body>
</html>
